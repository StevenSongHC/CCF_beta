<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
	<package name="ccf" extends="struts-default">
		
		<!-- config interceptor -->
		<interceptors>
			<interceptor name="loginInterceptor" class="com.ccf.interceptor.LoginInterceptor" />
			<interceptor name="userInterceptor" class="com.ccf.interceptor.UserInterceptor" />
			<interceptor name="stevInterceptor" class="com.ccf.interceptor.StevInterceptor" />
			
			<interceptor-stack name="loginAuthorityInterceptor">
				<interceptor-ref name="loginInterceptor" />
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		
			<interceptor-stack name="userIdentifyInterceptor">
				<interceptor-ref name="loginInterceptor" />
				<interceptor-ref name="userInterceptor" />
			</interceptor-stack>
			
			<interceptor-stack name="stevAuthorityInterceptor">
				<interceptor-ref name="loginInterceptor" />
				<interceptor-ref name="stevInterceptor" />
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		
		</interceptors>
		
		<global-results>
			<result name="denied" type="redirect">/operate_denied.jsp</result>
		</global-results>
		
		<!-- config user's action -->
		<action name="register" class="userRegisterAction">
			<!-- 防止表单重复提交 -->
			<result name="success" type="redirect">/register_success.jsp</result>	
			<!-- <result name="success" type="redirect">/register_success</result> -->	
			<result name="input">/register.jsp</result>
		</action>
		
		<action name="listUser" class="listUserAction">	<!-- Already excluded from validation -->
			<result name="success">/user_list.jsp</result>	<!-- 已在此页面关闭错误提示 -->
			<result name="login">/login.jsp</result>
			<interceptor-ref name="stevAuthorityInterceptor" />
		</action>
		
		<!-- <action name="goUserIndex" class="goUserIndexAction">	note:加了redirect会变空
			<result name="success">/user_index_test.jsp</result>
		</action> -->
		
		<action name="homepage" class="goToHomepageAction">	
			<result name="success">/personal_homepage.jsp</result>
		</action>
		
		<action name="profile" class="goToProfileAction">
			<result name="success">/user_index_test.jsp</result>
		</action>
		
		<action name="setting" class="goToSettingPageAction">
			<result name="success">/user_setting.jsp</result>
			<result name="input">/login.jsp</result>
		</action>
		
		<action name="update" class="updateUserProfileAction">
			<result name="success">/user_index_test.jsp</result>
		</action>
		
		<!-- User login action config -->
		<action name="autologin" class="autoLoginAction">
			<result name="success" type="redirect">/index.jsp</result>	<!-- auto-login succeed -->
			<result name="input" type="redirect">/login.jsp</result>	<!-- no logged yet -->
		</action>
		
		<action name="login" class="userLoginAction">
			<result name="success" type="redirect">/index.jsp</result>	<!-- login succeed -->
			<result name="input">/login.jsp</result>	<!-- wrong password -->
		</action>
		
		<action name="logout" class="userLogoutAction">
			<result name="success" type="redirect">/index.jsp</result>	
		</action>
		
		<!-- config club's action -->
		<action name="addClub" class="addClubAction">
			<result name="success" type="redirect">listClub</result>
		</action>
		
		<action name="listClub" class="listClubAction">
			<result name="success">/club_list.jsp</result>
		</action>
		
		<action name="goClubIndex" class="goClubIndexAction">
			<result name="success">/club_index_test.jsp</result>
		</action>
		
		<action name="goClubProfile" class="goClubProfileAction">
			<result name="success" type="redirect">/stev_club_setting.jsp</result>	<!-- !! -->
		</action>
		
		<action name="updateClubProfile" class="updateClubProfileAction">
			<result name="success">/club_index_test.jsp</result>
			<interceptor-ref name="stevAuthorityInterceptor" />
		</action>
		
		<!-- config stev-admin action -->
		<action name="addUser" class="addTestAccount">
			<result name="success" type="redirect">listUser</result>
			<interceptor-ref name="stevAuthorityInterceptor" />
		</action>
		
		<action name="viewClubMembers" class="memberList">
			<result name="success">/stev_club_members.jsp</result>
			<interceptor-ref name="stevAuthorityInterceptor" />
		</action>
		
		<!-- <action name="showClubCrew" class="crewList">
			<result name="success" type="redirect">/stev_club_leader_list.jsp</result>
		</action> -->
		
		<action name="changeClubCrew" class="personnelChanges">
			<result name="success" type="redirect">/stev_club_members.jsp</result>
			<interceptor-ref name="stevAuthorityInterceptor" />
		</action>
		
	</package>
</struts>    
